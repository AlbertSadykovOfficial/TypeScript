# Проектные ссылки
(На 2021 г. новая возможность, имующая некоторые недоработки)

По мере роста проекта все больше времени будет уходить на компиляцию.

Для решения этой проблемы в TSC реализована функция названная:
Проектными сслыками, которая сокращает процесс компиляции за счет
объединения в модули и применения модульной компиляции.

Как использовать:
(Проект === каталог, содержащий tsconfig.json и TypeScript)
1. Разделить проект на несколько проектов, так, чтобы части,
требующие одноврменногообновления находились в одном каталоге.
2. В каждом каталоге проекта создать tsconfig, который имеет 
минимум следующее содержимое (файла):
```json
{
	"compilerOptions": {
		"composite": true,
		"declaration": true,
		"declarationMap": true,
		"rootDir": "."
	},
	"include": [
		"./**/*.ts"
	],
	"references": [
		{
			"path": "../myReferencedProject",
			"prepend": true
		}
	]
}
```
, где
composite - каталог явлляется подпроектом более крупного проекта
declaration - создать файлы декларации (важно)
declarationMap - создать карты кода для декларированных типов
rootDir - подпроект должен быть скомпилирован относительно корневого
проекта
references - массив подпроектов

Далее следует создать корневой tsconfig, ссылающийся на любые подпреокты,
на которые не ссылается никакой другой подпроект.

```json
{
	"files": [],
	"references": [
		{ "path": "./myFirstProject" },
		{ "path": "./mySecondProject" }
	]
}
```

Поле чего при компиляции слеует использовать флаг --build, чтобы TS
учел проектные ссылки:
```bash
tsc --build
```

## Особенности:
1. При клонировании и повторном получении следует пересобирать проект (tsc --build)
2. Не использовать (noEmitOnError: false), TSC переведет его в True.
3. Убедиться, что подпроект добаален к началу не более чем одного проекта. 
В противном случае подпроект будет при компиляции появляться 2 раза.

## Расширение конфигурационного файла для уменьшения кода
Корневой каталог можно расширять, не вписывая одно и то же в его подпроектах,
с помощью параметра (extends):

```json
{
	"extends": "../tsconfig.base",
	"include": [
		"./**/*.ts"
	],
	"references": [
		{ 
			"path": "./myFirstProject",
			"prepend": true
		},
	]
}
```
